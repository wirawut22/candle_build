(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{395:function(t,e,r){"use strict";r(28),r(18),r(19),r(46),r(47);var o=r(9);function n(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?n(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):n(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var c={data:function(){return{form:this.reserve?l({},this.reserve):{zone_id:"",title:"",first_name:"",last_name:"",mobile:"",amount:"0",status:"A"}}},mounted:function(){$("#reserveForm").validate({rules:{zone_id:{required:!0},title:{required:!0},first_name:{required:!0},last_name:{required:!0},mobile:{required:!0,maxlength:10,minlength:10,digits:!0}},messages:{zone_id:{required:"กรุณาเลือกโซน"},title:{required:"กรุณาเลือกคำนำหน้า"},first_name:{required:"กรุณาระบุชื่อ"},last_name:{required:"กรุณาระบุนามสกุล"},mobile:{required:"กรุณาระบุเบอร์มือถือ",maxlength:"ขนาดเบอร์มือถือต้อง 10 หลักเท่านั้น",minlength:"ขนาดเบอร์มือถือต้อง 10 หลักเท่านั้น",digits:"จำนวนที่นั่งต้องเป็นตัวเลขเท่านั้น"}},errorElement:"span",errorPlacement:function(t,element){t.addClass("invalid-feedback"),element.closest(".form-group").append(t)},highlight:function(element,t,e){$(element).addClass("is-invalid")},unhighlight:function(element,t,e){$(element).removeClass("is-invalid")},ignore:".note-editor *"})},props:{reserve:{type:Object,required:!1},zone:{type:Array,required:!1}},methods:{onSubmit:function(t){$("#reserveForm").valid()?this.$emit("reserveData",this.form):console.log("validate is failed")},onReset:function(t){t.preventDefault(),this.form.zone_id="",this.form.title="",this.form.first_name="",this.form.last_name="",this.form.mobile="",this.form.amount="0",this.form.status="A"}}},m=r(4),component=Object(m.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row reserve"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"card"},[t._m(0),t._v(" "),r("form",{attrs:{id:"reserveForm",role:"form"},on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)},reset:t.onReset}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"zone_id"}},[t._v("โซน")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.zone_id,expression:"form.zone_id"}],staticClass:"form-control",attrs:{name:"zone_id",id:"zone_id"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"zone_id",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[t._v("กรุณาเลือก")]),t._v(" "),t._l(t.zone,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.topic))])}))],2)])]),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"title"}},[t._v("คำนำหน้า")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{name:"title",id:"title"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"title",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[t._v("กรุณาเลือก")]),t._v(" "),r("option",{attrs:{value:"นาย"}},[t._v("นาย")]),t._v(" "),r("option",{attrs:{value:"นาง"}},[t._v("นาง")]),t._v(" "),r("option",{attrs:{value:"นางสาว"}},[t._v("นางสาว")])])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"first_name"}},[t._v("ชื่อ")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.first_name,expression:"form.first_name"}],staticClass:"form-control",attrs:{type:"text",name:"first_name",id:"first_name",autocomplete:"off"},domProps:{value:t.form.first_name},on:{input:function(e){e.target.composing||t.$set(t.form,"first_name",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"last_name"}},[t._v("นามสกุล")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.last_name,expression:"form.last_name"}],staticClass:"form-control",attrs:{type:"text",name:"last_name",id:"last_name",autocomplete:"off"},domProps:{value:t.form.last_name},on:{input:function(e){e.target.composing||t.$set(t.form,"last_name",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"mobile"}},[t._v("เบอร์มือถือ")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.mobile,expression:"form.mobile"}],staticClass:"form-control",attrs:{type:"text",name:"mobile",id:"mobile",maxlength:"10",autocomplete:"off"},domProps:{value:t.form.mobile},on:{input:function(e){e.target.composing||t.$set(t.form,"mobile",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"amount"}},[t._v("จำนวนที่นั่ง")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.amount,expression:"form.amount"}],staticClass:"form-control",attrs:{type:"number",name:"amount",id:"amount",min:"0",max:"1000",step:"1",autocomplete:"off"},domProps:{value:t.form.amount},on:{input:function(e){e.target.composing||t.$set(t.form,"amount",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"status"}},[t._v("สถานะ")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.status,expression:"form.status"}],staticClass:"form-control",attrs:{name:"status",id:"status"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"status",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"P"}},[t._v("กำลังดำเนินการ")]),t._v(" "),r("option",{attrs:{value:"A"}},[t._v("อนุมัติ")]),t._v(" "),r("option",{attrs:{value:"I"}},[t._v("ไม่อนุมัติ")])])])])])]),t._v(" "),t._m(1)])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header"},[r("h3",{staticClass:"card-title"},[t._v("เพิ่มรายการจองใหม่")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-footer text-center"},[r("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v("บันทึก")]),t._v(" "),r("button",{staticClass:"btn btn-default",attrs:{type:"reset"}},[t._v("ล้างข้อมูล")])])}],!1,null,"332268fa",null);e.a=component.exports},449:function(t,e,r){"use strict";r.r(e);r(28),r(18),r(19),r(46),r(47);var o=r(9),n=r(395),l=r(3),c=r.n(l);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={layout:"adminLayout",components:{ReserveForm:n.a},asyncData:function(t){return c.a.get("https://service.candlesfest.com/api/reserve/find/id/"+t.params.id).then((function(t){return{reservePost:v({},t.data.reserve)}})).catch((function(e){return t.error(e)}))},methods:{onSubmitted:function(t){var e=this;$("#loading-modal").modal("show"),this.$store.dispatch("editReserve",t).then((function(){setTimeout((function(){e.$router.push("/admin/reserve"),$("#loading-modal").modal("hide"),toastr.info("แก้ไขข้อมูลเรียบร้อยเเล้ว")}),1500)})).catch((function(t){$("#loading-modal").modal("hide"),toastr.error("ไม่สามารถเเก้ไขข้อมูลได้"),console.log("error ",t)}))}},fetch:function(t){var e=t.store;t.params;if(!e.state.zoneData||0==e.state.zoneData.length)return e.dispatch("initZone")},computed:{loadZoneData:function(){var data=[];return this.$store.getters.getAllZone&&(data=this.$store.getters.getAllZone),data}}},f=r(4),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"content-header"},[r("div",{staticClass:"container-fluid"},[r("div",{staticClass:"row mb-2"},[t._m(0),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("ol",{staticClass:"breadcrumb float-sm-right"},[r("li",{staticClass:"breadcrumb-item"},[r("nuxt-link",{attrs:{to:"/admin/news"}},[t._v("หน้าแรก")])],1),t._v(" "),r("li",{staticClass:"breadcrumb-item"},[r("nuxt-link",{attrs:{to:"/admin/reserve"}},[t._v("เเสดงรายการจอง")])],1),t._v(" "),r("li",{staticClass:"breadcrumb-item active"},[t._v("แก้ไขรายการจอง")])])])])])]),t._v(" "),r("section",{staticClass:"content"},[r("div",{staticClass:"container-fluid"},[r("ReserveForm",{attrs:{reserve:t.reservePost,zone:t.loadZoneData},on:{reserveData:t.onSubmitted}})],1)])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-sm-6"},[r("h1",{staticClass:"m-0 text-dark"},[t._v("แก้ไขรายการจอง")])])}],!1,null,null,null);e.default=component.exports}}]);